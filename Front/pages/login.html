<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Login or Register to LPWinners - Your League of Legends companion">
    <title>Authentification - LPWinners</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/components.css">
    <link rel="stylesheet" href="../css/animations.css">
    <link rel="stylesheet" href="../css/pages/auth.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%238b5cf6'/%3E%3Cstop offset='100%25' style='stop-color:%23a855f7'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='100' height='100' rx='20' fill='url(%23g)'/%3E%3Ctext x='50' y='65' font-family='Arial' font-size='50' font-weight='bold' fill='white' text-anchor='middle'%3ELP%3C/text%3E%3C/svg%3E">
</head>

<body class="auth-page">
    <canvas id="particles-canvas"></canvas>

    <div class="auth-wrapper">
        <!-- Logo Header -->
        <a href="../index.html" class="auth-brand">
            <div class="auth-brand-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" />
                </svg>
            </div>
            <span>LPWinners</span>
        </a>

        <!-- Auth Card -->
        <div class="auth-card glass-card">
            <!-- Toggle Tabs -->
            <div class="auth-tabs">
                <button class="auth-tab active" data-tab="login">Connexion</button>
                <button class="auth-tab" data-tab="register">Inscription</button>
                <div class="auth-tab-indicator"></div>
            </div>

            <!-- Login Panel -->
            <div class="auth-panel active" id="panel-login">
                <form class="auth-form" id="login-form">
                    <div class="form-group">
                        <label class="form-label" for="login-email">Email</label>
                        <div class="input-wrapper">
                            <i class="input-icon fas fa-envelope"></i>
                            <input type="email" class="form-input" id="login-email" placeholder="votre@email.com"
                                required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="login-password">Mot de passe</label>
                        <div class="input-wrapper">
                            <i class="input-icon fas fa-lock"></i>
                            <input type="password" class="form-input" id="login-password" placeholder="••••••••"
                                required>
                            <button type="button" class="input-toggle" data-target="login-password">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>

                    <div class="form-options">
                        <label class="checkbox-wrapper">
                            <input type="checkbox" id="remember">
                            <span class="checkbox-mark"></span>
                            <span>Se souvenir de moi</span>
                        </label>
                        <a href="#" class="form-link">Mot de passe oublié ?</a>
                    </div>

                    <button type="submit" class="btn btn-primary btn-lg">
                        <span>Se connecter</span>
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </form>
            </div>

            <!-- Register Panel -->
            <div class="auth-panel" id="panel-register">
                <form class="auth-form" id="register-form">
                    <div class="form-group">
                        <label class="form-label" for="register-username">Pseudo</label>
                        <div class="input-wrapper">
                            <i class="input-icon fas fa-user"></i>
                            <input type="text" class="form-input" id="register-username" placeholder="VotreNom"
                                required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="register-email">Email</label>
                        <div class="input-wrapper">
                            <i class="input-icon fas fa-envelope"></i>
                            <input type="email" class="form-input" id="register-email" placeholder="votre@email.com"
                                required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="register-password">Mot de passe</label>
                        <div class="input-wrapper">
                            <i class="input-icon fas fa-lock"></i>
                            <input type="password" class="form-input" id="register-password"
                                placeholder="8 caractères minimum" required minlength="8">
                            <button type="button" class="input-toggle" data-target="register-password">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="password-strength" id="password-strength">
                            <div class="strength-bar"></div>
                            <span class="strength-text">Force du mot de passe</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-wrapper">
                            <input type="checkbox" id="terms" required>
                            <span class="checkbox-mark"></span>
                            <span>J'accepte les <a href="#" class="form-link">conditions d'utilisation</a></span>
                        </label>
                    </div>

                    <button type="submit" class="btn btn-primary btn-lg">
                        <span>Créer mon compte</span>
                        <i class="fas fa-user-plus"></i>
                    </button>
                </form>
            </div>
        </div>

        <!-- Footer -->
        <p class="auth-footer-text">
            © 2024 LPWinners. Non affilié à Riot Games.
        </p>
    </div>

    <script>
        // Tab switching
        const tabs = document.querySelectorAll('.auth-tab');
        const panels = document.querySelectorAll('.auth-panel');
        const indicator = document.querySelector('.auth-tab-indicator');

        tabs.forEach((tab, index) => {
            tab.addEventListener('click', () => {
                // Update tabs
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');

                // Update panels with animation
                panels.forEach(p => p.classList.remove('active'));
                document.getElementById(`panel-${tab.dataset.tab}`).classList.add('active');

                // Move indicator
                indicator.style.transform = `translateX(${index * 100}%)`;
            });
        });

        // Password toggle
        document.querySelectorAll('.input-toggle').forEach(btn => {
            btn.addEventListener('click', () => {
                const targetId = btn.dataset.target;
                const input = document.getElementById(targetId);
                const icon = btn.querySelector('i');

                if (input.type === 'password') {
                    input.type = 'text';
                    icon.classList.remove('fa-eye');
                    icon.classList.add('fa-eye-slash');
                } else {
                    input.type = 'password';
                    icon.classList.remove('fa-eye-slash');
                    icon.classList.add('fa-eye');
                }
            });
        });

        // Password strength
        const passwordInput = document.getElementById('register-password');
        const strengthBar = document.querySelector('.strength-bar');
        const strengthText = document.querySelector('.strength-text');

        if (passwordInput) {
            passwordInput.addEventListener('input', (e) => {
                const value = e.target.value;
                let strength = 0;
                let text = '';
                let color = '';

                if (value.length >= 8) strength++;
                if (value.length >= 12) strength++;
                if (/[A-Z]/.test(value)) strength++;
                if (/[0-9]/.test(value)) strength++;
                if (/[^A-Za-z0-9]/.test(value)) strength++;

                switch (strength) {
                    case 0:
                    case 1:
                        text = 'Faible';
                        color = '#ef4444';
                        break;
                    case 2:
                    case 3:
                        text = 'Moyen';
                        color = '#f59e0b';
                        break;
                    case 4:
                    case 5:
                        text = 'Fort';
                        color = '#10b981';
                        break;
                }

                strengthBar.style.width = `${(strength / 5) * 100}%`;
                strengthBar.style.background = color;
                strengthText.textContent = text;
                strengthText.style.color = color;
            });
        }

        // Form submissions
        document.getElementById('login-form')?.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('login-email').value;
            const username = email.split('@')[0]; // Use email prefix as username

            // Import and use auth
            import('../js/auth.js').then(({ auth }) => {
                auth.login(username, email, 'password');
                window.location.href = '../index.html';
            });
        });

        document.getElementById('register-form')?.addEventListener('submit', (e) => {
            e.preventDefault();
            const username = document.getElementById('register-username').value;
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;

            // Import and use auth
            import('../js/auth.js').then(({ auth }) => {
                auth.login(username, email, password);
                window.location.href = '../index.html';
            });
        });
    </script>
</body>

</html>